# Documentation
- Class name: MultivalDynamicNode
- Category: Animate Diff üé≠üÖêüÖì/multival
- Output node: False
- Repo Ref: https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved.git

The MultiivalDynamicNode class is designed to generate and operate dynamic multivalue data in an animated framework. It is a key component for creating complex animations, allowing users to specify a range of values that can be applied to different aspects of animating, such as role movement or landscape conversion. The function of the node revolves around the 'create_multinal' method, which intelligently processes individual and interrogateable input values and ensures that the output format is suitable for downstream processing.

# Input types
## Required
- float_val
    - The parameter 'float_val' is essential for defining the node that will be used to create the base or value series of multivalue data. It can accept either the individual floating point number or the altruistic object of the floating point number, which provides a high degree of flexibility in different aspects of the animation scenario. The parameter has a significant impact on node execution, as it directly affects the scope and nature of the output value.
    - Comfy dtype: FLOAT
    - Python dtype: Union[float, List[float]]
## Optional
- mask_optional
    - The parameter'mask_optional' is used to apply the mask to multivalue data generated by the node. This is an optional volume, which, when available, allows the selective application of 'float_val' on different elements of the animation. This parameter increases the function of the node by enabling conditions or partial animation effects, adding depth to the final animation.
    - Comfy dtype: MASK
    - Python dtype: Optional[torch.Tensor]

# Output types
- multival
    - Output'multivalued' means processed multivalue data that can be used in animated waterlines. It is a volume that contains a range of dynamic values specified by the 'float_val' parameter, which may be modified by the'mask_optional' parameter. This output is important because it forms the basis for further animation development and can be incorporated directly into the rendering process.
    - Comfy dtype: MULTIVAL
    - Python dtype: torch.Tensor

# Usage tips
- Infra type: CPU

# Source code
```
class MultivalDynamicNode:

    @classmethod
    def INPUT_TYPES(s):
        return {'required': {'float_val': ('FLOAT', {'default': 1.0, 'min': 0.0, 'step': 0.001})}, 'optional': {'mask_optional': ('MASK',)}}
    RETURN_TYPES = ('MULTIVAL',)
    CATEGORY = 'Animate Diff üé≠üÖêüÖì/multival'
    FUNCTION = 'create_multival'

    def create_multival(self, float_val: Union[float, list[float]]=1.0, mask_optional: Tensor=None):
        float_is_iterable = False
        if isinstance(float_val, Iterable):
            float_is_iterable = True
            float_val = list(float_val)
            if mask_optional is not None:
                if len(float_val) < mask_optional.shape[0]:
                    float_val = float_val + float_val[-1] * (mask_optional.shape[0] - len(float_val))
                if mask_optional.shape[0] < len(float_val):
                    mask_optional = extend_to_batch_size(mask_optional, len(float_val))
                float_val = float_val[:mask_optional.shape[0]]
            float_val: Tensor = torch.tensor(float_val).unsqueeze(-1).unsqueeze(-1)
        if mask_optional is not None:
            mask_optional = mask_optional.clone()
            if float_is_iterable:
                mask_optional = mask_optional[:] * float_val.to(mask_optional.dtype).to(mask_optional.device)
            else:
                mask_optional = mask_optional * float_val
            return (mask_optional,)
        else:
            if not float_is_iterable:
                return (float_val,)
            float_len = float_val.shape[0] if float_is_iterable else 1
            shape = (float_len, 1, 1)
            mask_optional = torch.ones(shape)
            mask_optional = mask_optional[:] * float_val.to(mask_optional.dtype).to(mask_optional.device)
            return (mask_optional,)
```