# Documentation
- Class name: IterativeMixingSchedulerAdvanced
- Category: sampling/custom_sampling/schedulers
- Output node: False
- Repo Ref: https://github.com/ttulttul/ComfyUI-Iterative-Mixer

The IterativeMixingSchedulerAdvanced node is designed to generate a series of noise levels for the iterative sampling process, i.e. sigmas. It adjusts the sampling steps to de-noise parameters so as to ensure that the output is finely adjusted to the required noise reduction level. The node plays a key role in the sampling plan for controlling advanced iterative sampling techniques, contributing to the overall quality and efficiency of the sampling process.

# Input types
## Required
- model
    - Model parameters are essential for the operation of nodes, as they define the generation model that will be applied to the scheduler. They directly affect the quality and type of sigmas generated, which is essential for the sampling process.
    - Comfy dtype: MODEL
    - Python dtype: comfy.model_management.Model
- scheduler
    - The scheduler parameters determine the dispatch strategy to be used in the sampling process. It is a key factor in calculating sigmas and therefore affects the overall performance of the iterative sampling.
    - Comfy dtype: SCHEDULER_NAMES
    - Python dtype: str
- steps
    - The Steps parameter specifies the number of turns or steps to be performed during the sampling process. It is an important factor in controlling the duration and particle size of the sampling plan.
    - Comfy dtype: INT
    - Python dtype: int
- start_at_step
    - The start_at_step parameter allows a custom sampling plan to start. It can be used to skip the initial step or to start sampling at a particular point in the process.
    - Comfy dtype: INT
    - Python dtype: int
- end_at_step
    - End_at_step parameters define the end of the sampling plan. It can be used to limit the number of steps to be implemented and to stop the sampling process at the intended point.
    - Comfy dtype: INT
    - Python dtype: int
- denoise
    - The denoise parameter adjusts the level of noise reduction during the sampling process. It is a key factor in determining the quality of the final output and is achieved by controlling the intensity of the noise process.
    - Comfy dtype: FLOAT
    - Python dtype: float

# Output types
- sigmas
    - The sigmas output represents the noise level sequences generated by nodes. These values guide the iterative sampling process and guide the model to produce a higher quality output.
    - Comfy dtype: SIGMAS
    - Python dtype: torch.Tensor

# Usage tips
- Infra type: CPU

# Source code
```
class IterativeMixingSchedulerAdvanced:

    @classmethod
    def INPUT_TYPES(s):
        return {'required': {'model': ('MODEL',), 'scheduler': (comfy.samplers.SCHEDULER_NAMES,), 'steps': ('INT', {'default': 20, 'min': 1, 'max': 10000}), 'start_at_step': ('INT', {'default': 0, 'min': 0, 'max': 10000}), 'end_at_step': ('INT', {'default': 10000, 'min': 0, 'max': 10000}), 'denoise': ('FLOAT', {'default': 1.0, 'min': 0.0, 'max': 1.0, 'step': 0.01})}}
    RETURN_TYPES = ('SIGMAS',)
    CATEGORY = 'sampling/custom_sampling/schedulers'
    FUNCTION = 'get_sigmas'

    @torch.no_grad()
    def get_sigmas(self, model, scheduler, steps, start_at_step, end_at_step, denoise):
        sigmas = None
        cs = comfy.samplers.calculate_sigmas_scheduler
        if denoise is None or denoise > 0.9999:
            sigmas = cs(model.model, scheduler, steps).cpu()
        else:
            new_steps = int(steps / denoise)
            sigmas = cs(model.model, scheduler, new_steps).cpu()
            sigmas = sigmas[-(steps + 1):]
        if end_at_step is not None and end_at_step < len(sigmas) - 1:
            sigmas = sigmas[:end_at_step + 1]
        if start_at_step is not None:
            if start_at_step < len(sigmas) - 1:
                sigmas = sigmas[start_at_step:]
            else:
                return torch.Tensor([])
        return (sigmas,)
```