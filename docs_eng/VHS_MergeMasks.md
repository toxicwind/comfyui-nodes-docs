# Documentation
- Class name: MergeMasks
- Category: Video Helper Suite ðŸŽ¥ðŸ…¥ðŸ…—ðŸ…¢/mask
- Output node: False
- Repo Ref: https://github.com/Kosinkadink/ComfyUI-VideoHelperSuite.git

The MergeMasks node is designed to combine two input masks into a single mask. It ensures seamless integration of the mask by using the specified combination strategy and scaling method. This node is particularly suitable for applications where multiple mask layers need to be combined for further processing or visualization.

# Input types
## Required
- mask_A
    - The first mask to merge is a key component of the ultimate combination mask. It determines the initial structure in which the second mask is integrated.
    - Comfy dtype: MASK
    - Python dtype: torch.Tensor
- mask_B
    - The second mask to merge will be aligned with the first mask according to the merger strategy.
    - Comfy dtype: MASK
    - Python dtype: torch.Tensor
- merge_strategy
    - Define how the two masks should be merged by matching the dimensions of one mask to the other, or by choosing a smaller or larger one of the two.
    - Comfy dtype: str
    - Python dtype: str
- scale_method
    - The method designated for scaling masks to match dimensions is critical to the consolidation process.
    - Comfy dtype: str
    - Python dtype: str
- crop
    - Indicates the tailoring techniques to be applied during the scaling process to ensure that the merged mask is correctly aligned.
    - Comfy dtype: str
    - Python dtype: str

# Output types
- MASK
    - The output is a combination mask generated by the consolidation process, representing an integrated structure for entering the mask.
    - Comfy dtype: MASK
    - Python dtype: torch.Tensor
- count
    - Provides the number of merged masks and provides an understanding of the number of layers integrated in the final mask.
    - Comfy dtype: INT
    - Python dtype: int

# Usage tips
- Infra type: CPU

# Source code
```
class MergeMasks:

    @classmethod
    def INPUT_TYPES(s):
        return {'required': {'mask_A': ('MASK',), 'mask_B': ('MASK',), 'merge_strategy': (MergeStrategies.list_all,), 'scale_method': (ScaleMethods.list_all,), 'crop': (CropMethods.list_all,)}}
    CATEGORY = 'Video Helper Suite ðŸŽ¥ðŸ…¥ðŸ…—ðŸ…¢/mask'
    RETURN_TYPES = ('MASK', 'INT')
    RETURN_NAMES = ('MASK', 'count')
    FUNCTION = 'merge'

    def merge(self, mask_A: Tensor, mask_B: Tensor, merge_strategy: str, scale_method: str, crop: str):
        masks = []
        if mask_A.shape[2] != mask_B.shape[2] or mask_A.shape[1] != mask_B.shape[1]:
            A_size = mask_A.shape[2] * mask_A.shape[1]
            B_size = mask_B.shape[2] * mask_B.shape[1]
            use_A_as_template = True
            if merge_strategy == MergeStrategies.MATCH_A:
                pass
            elif merge_strategy == MergeStrategies.MATCH_B:
                use_A_as_template = False
            elif merge_strategy in (MergeStrategies.MATCH_SMALLER, MergeStrategies.MATCH_LARGER):
                if A_size <= B_size:
                    use_A_as_template = True if merge_strategy == MergeStrategies.MATCH_SMALLER else False
            mask_A = torch.unsqueeze(mask_A, 1)
            mask_B = torch.unsqueeze(mask_B, 1)
            if use_A_as_template:
                mask_B = comfy.utils.common_upscale(mask_B, mask_A.shape[3], mask_A.shape[2], scale_method, crop)
            else:
                mask_A = comfy.utils.common_upscale(mask_A, mask_B.shape[3], mask_B.shape[2], scale_method, crop)
            mask_A = torch.squeeze(mask_A, 1)
            mask_B = torch.squeeze(mask_B, 1)
        masks.append(mask_A)
        masks.append(mask_B)
        all_masks = torch.cat(masks, dim=0)
        return (all_masks, all_masks.size(0))
```