# Documentation
- Class name: WildcardOobaPrompt
- Category: Mikey/AI
- Output node: True
- Repo Ref: https://github.com/bash-j/mikey_nodes

The `process' method of WildcardOobaPrompt nodes is designed to apply dynamically generate and process tips for AI. It replaces the wildcards in the input tips as random selection and is integrated with external APIs to generate detailed responses. The node plays a key role in creating diversified and situation-rich AI model tips, enhancing their ability to produce fine outputs.

# Input types
## Required
- input_prompt
    - The `input_prompt' parameter is a string that contains the initial text of the reminder. It is essential because it forms the basis for the wildcard replacement and the AI follow-up process. This parameter directly affects the diversity and creativity of the final output generated by the node.
    - Comfy dtype: STRING
    - Python dtype: str
- seed
    - The `seed' parameter is an integer of a random number generator used in the initialization of wildcard replacement. It ensures that the result is replicable, which is essential for the function of the debugging and consistency test node.
    - Comfy dtype: INT
    - Python dtype: int
## Optional
- unique_id
    - The `unique_id' parameter is the only identifier used to refer to specific entries in the hint. It is particularly important when managing multiple and sending reminders, as it allows nodes to accurately locate and update the required tips.
    - Comfy dtype: UNIQUE_ID
    - Python dtype: str

# Output types
- text
    - The 'text' output parameter represents a hint that all wildcards are replaced and the AI response is integrated and finally processed. It is a key output because it is entered directly into the AI model to influence the quality and properties of the content generated.
    - Comfy dtype: STRING
    - Python dtype: str

# Usage tips
- Infra type: CPU

# Source code
```
class WildcardOobaPrompt:

    @classmethod
    def INPUT_TYPES(s):
        return {'required': {'input_prompt': ('STRING', {'multiline': True, 'default': 'Prompt Text Here', 'dynamicPrompts': False}), 'seed': ('INT', {'default': 0, 'min': 0, 'max': 18446744073709551615})}, 'hidden': {'unique_id': 'UNIQUE_ID', 'extra_pnginfo': 'EXTRA_PNGINFO', 'prompt': 'PROMPT'}}
    RETURN_TYPES = ('STRING',)
    RETURN_NAMES = ('text',)
    FUNCTION = 'process'
    OUTPUT_NODE = True
    CATEGORY = 'Mikey/AI'

    def process(self, input_prompt, seed, prompt=None, unique_id=None, extra_pnginfo=None):
        input_prompt = search_and_replace(input_prompt, extra_pnginfo, prompt)
        wc_re = re.compile('{([^}]+)}')

        def repl(m):
            return random.choice(m.group(1).split('|'))
        for m in wc_re.finditer(input_prompt):
            input_prompt = input_prompt.replace(m.group(0), repl(m))
        input_prompt = find_and_replace_wildcards(input_prompt, seed, debug=True)
        llm_re = re.compile('<llm:(.*?):(.*?)>')
        for m in llm_re.finditer(input_prompt):
            mode = m.group(1)
            if '.json' in mode:
                custom_history = mode
                mode = 'custom'
            else:
                custom_history = None
            prompt_text = m.group(2)
            ooba = OobaPrompt()
            result = ooba.api_request(prompt_text, seed, mode, custom_history)
            input_prompt = input_prompt.replace(m.group(0), result)
        prompt.get(str(unique_id))['inputs']['output_text'] = input_prompt
        return (input_prompt,)
```