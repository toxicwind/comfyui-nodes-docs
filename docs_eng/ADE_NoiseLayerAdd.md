# Documentation
- Class name: NoiseLayerAddNode
- Category: Animate Diff üé≠üÖêüÖì/noise layers
- Output node: False
- Repo Ref: https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved.git

The NoiseLayerAddNode class is designed to manage the inclusion of noise layers in the animation. It is responsible for creating and organizing noise layers based on specified parameters and ensuring that noise is seamlessly integrated into the animation process to enhance diversity and detail.

# Input types
## Required
- batch_offset
    - Batch deviation parameters are essential to manage the noise layers sequence in the animation. It determines the starting point of the noise application, thus affecting the distribution and mode of noise throughout the animation.
    - Comfy dtype: INT
    - Python dtype: int
- noise_type
    - Noise type parameters define the category of noise to be added to the animation. It is a key determinant in shaping the visual properties of noise, affecting the ultimate beauty of animated output.
    - Comfy dtype: NoiseLayerType.LIST
    - Python dtype: str
- seed_gen_override
    - Seeds generate coverage parameters that allow customised noise generation processes. It provides a method for controlling the randomity and uniqueness of noise patterns and provides a layer of fine-tuning of animated noise properties.
    - Comfy dtype: SeedNoiseGeneration.LIST_WITH_OVERRIDE
    - Python dtype: str
- seed_offset
    - Seed deviation parameters play an important role in adjusting the starting point of the noise mode. They can significantly change the initial noise configuration, leading to animated noise changes.
    - Comfy dtype: INT
    - Python dtype: int
- noise_weight
    - Noise weight parameters are adjusted for the noise intensity added to the animation. It is a key factor in controlling the visibility of noise effects, allowing the noise balance to be integrated into the animation.
    - Comfy dtype: FLOAT
    - Python dtype: float
## Optional
- prev_noise_layers
    - The previous noise layer parameter refers to existing noise layers. It is important because it provides context for the integration of new noise layers and ensures continuity and consistency within animated noise structures.
    - Comfy dtype: NOISE_LAYERS
    - Python dtype: Optional[NoiseLayerGroup]
- mask_optional
    - The mask can be used to define an optional mask for the noise layer. It can be used to selectively apply noise to specific areas of animation and provide a degree of control over noise distribution.
    - Comfy dtype: MASK
    - Python dtype: Optional[torch.Tensor]
- seed_override
    - Feeds overlay parameters allow manual specification of seeds generated by noise. It is particularly suitable for copying or customizing specific noise patterns in animations.
    - Comfy dtype: INT
    - Python dtype: Optional[int]

# Output types
- noise_layers
    - The output noise layer means a new and updated collection of noise layers after adding a new noise layer. This output is important because it reflects the current state of the animated noise structure and provides a basis for further processing or analysis.
    - Comfy dtype: NOISE_LAYERS
    - Python dtype: NoiseLayerGroup

# Usage tips
- Infra type: CPU

# Source code
```
class NoiseLayerAddNode:

    @classmethod
    def INPUT_TYPES(s):
        return {'required': {'batch_offset': ('INT', {'default': 0, 'min': 0, 'max': BIGMAX}), 'noise_type': (NoiseLayerType.LIST,), 'seed_gen_override': (SeedNoiseGeneration.LIST_WITH_OVERRIDE,), 'seed_offset': ('INT', {'default': 0, 'min': BIGMIN, 'max': BIGMAX}), 'noise_weight': ('FLOAT', {'default': 0.5, 'min': 0.0, 'max': 10.0, 'step': 0.001})}, 'optional': {'prev_noise_layers': ('NOISE_LAYERS',), 'mask_optional': ('MASK',), 'seed_override': ('INT', {'default': 0, 'min': 0, 'max': 18446744073709551615, 'forceInput': True})}}
    RETURN_TYPES = ('NOISE_LAYERS',)
    CATEGORY = 'Animate Diff üé≠üÖêüÖì/noise layers'
    FUNCTION = 'create_layers'

    def create_layers(self, batch_offset: int, noise_type: str, seed_gen_override: str, seed_offset: int, noise_weight: float, prev_noise_layers: NoiseLayerGroup=None, mask_optional: Tensor=None, seed_override: int=None):
        if prev_noise_layers is None:
            prev_noise_layers = NoiseLayerGroup()
        prev_noise_layers = prev_noise_layers.clone()
        layer = NoiseLayerAdd(noise_type=noise_type, batch_offset=batch_offset, seed_gen_override=seed_gen_override, seed_offset=seed_offset, seed_override=seed_override, mask=mask_optional, noise_weight=noise_weight)
        prev_noise_layers.add_to_start(layer)
        return (prev_noise_layers,)
```