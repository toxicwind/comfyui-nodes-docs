# Create Raw Sigma Schedule üé≠üÖêüÖì
## Documentation
- Class name: ADE_RawSigmaSchedule
- Category: Animate Diff üé≠üÖêüÖì/sample settings/sigma schedule
- Output node: False
- Repo Ref: https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved.git

This node is designed to generate a sigma plan based on the given Beta plan. It converts Beta to a sigma plan, which is essential to controlling noise levels in proliferation models, especially in the context of animation and image synthesis.

## Input types
### Required
- raw_beta_schedule
    - Specifies the Beta plan to be converted to the sigma plan. This parameter is essential to determine the progress and intensity of noise levels throughout the diffusion process.
    - Comfy dtype: COMBO[STRING]
    - Python dtype: str
- linear_start
    - Defines the starting point for linear plugs generated by the sigma plan. It affects the initial noise level during the diffusion process.
    - Comfy dtype: FLOAT
    - Python dtype: float
- linear_end
    - Sets the endpoint of the linear plug in of the sigma plan to influence the final noise level during the diffusion process.
    - Comfy dtype: FLOAT
    - Python dtype: float
- sampling
    - Determines the sampling methods used in the sigma plan, influencing the plug-in and application of noise levels. The type ‚ÄúModelSamplingType‚Äù is understood as the placeholder for the actual selection method.
    - Comfy dtype: COMBO[STRING]
    - Python dtype: str
- lcm_original_timesteps
    - Specifies the number of original time steps to be considered when using LCM samples to influence the size of the sigma plan.
    - Comfy dtype: INT
    - Python dtype: int
- lcm_zsnr
    - A boolean sign indicating whether to apply a zero letter ratio (zSNR) adjustment to the sigma plan to enhance its compatibility with certain proliferation processes.
    - Comfy dtype: BOOLEAN
    - Python dtype: bool

## Output types
- sigma_schedule
    - Comfy dtype: SIGMA_SCHEDULE
    - The generated sigma plan outlines the specific noise levels to be applied at each step of the diffusion process.
    - Python dtype: SigmaSchedule

## Usage tips
- Infra type: CPU
- Common nodes: unknown

## Source code
```python
class RawSigmaScheduleNode:
    @classmethod
    def INPUT_TYPES(s):
        return {
            "required": {
                "raw_beta_schedule": (BetaSchedules.RAW_BETA_SCHEDULE_LIST,),
                "linear_start": ("FLOAT", {"default": 0.00085, "min": 0.0, "max": 1.0, "step": 0.000001}),
                "linear_end": ("FLOAT", {"default": 0.012, "min": 0.0, "max": 1.0, "step": 0.000001}),
                #"cosine_s": ("FLOAT", {"default": 8e-3, "min": 0.0, "max": 1.0, "step": 0.000001}),
                "sampling": (ModelSamplingType._FULL_LIST,),
                "lcm_original_timesteps": ("INT", {"default": 50, "min": 1, "max": 1000}),
                "lcm_zsnr": ("BOOLEAN", {"default": False}),
            }
        }
    
    RETURN_TYPES = ("SIGMA_SCHEDULE",)
    CATEGORY = "Animate Diff üé≠üÖêüÖì/sample settings/sigma schedule"
    FUNCTION = "get_sigma_schedule"

    def get_sigma_schedule(self, raw_beta_schedule: str, linear_start: float, linear_end: float,# cosine_s: float,
                           sampling: str, lcm_original_timesteps: int, lcm_zsnr: bool):
        new_config = ModelSamplingConfig(beta_schedule=raw_beta_schedule, linear_start=linear_start, linear_end=linear_end)
        if sampling != ModelSamplingType.LCM:
            lcm_original_timesteps=None
            lcm_zsnr=False
        model_type = ModelSamplingType.from_alias(sampling)    
        new_model_sampling = BetaSchedules._to_model_sampling(alias=BetaSchedules.AUTOSELECT, model_type=model_type, config_override=new_config, original_timesteps=lcm_original_timesteps)
        if lcm_zsnr:
            SigmaSchedule.apply_zsnr(new_model_sampling=new_model_sampling)
        return (SigmaSchedule(model_sampling=new_model_sampling, model_type=model_type),)