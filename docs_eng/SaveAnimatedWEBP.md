# Documentation
- Class name: SaveAnimatedWEBP
- Category: image/animation
- Output node: True
- Repo Ref: https://github.com/comfyanonymous/ComfyUI

The'save_images' method of the SaveAnimated WEBP node is designed to efficiently save a series of images into animated WEBP files. It converts images into an animated format using the PIL library, allowing for frame speed control, non-destructive compression and quality settings. The node plays a key role in the final output of the image processing workflow, creating animation visual effects from a series of static images.

# Input types
## Required
- images
    - The “images” parameter is essential for the node because it defines the input image that will be saved as an animation. Each image forms a frame in the final output, affecting the entire animation sequence and its visual quality.
    - Comfy dtype: IMAGE
    - Python dtype: List[torch.Tensor]
- fps
    - The "fps" parameter determines the frame rate of the animation, which is a key factor in the movement perception of the final output. It determines the speed of the frame display and affects the flow of the animation as a whole.
    - Comfy dtype: FLOAT
    - Python dtype: float
- lossless
    - The Lossless parameter is important for controlling the compression method used to save the image. When set to True, it ensures that the animation is kept of the highest quality and does not lose image data.
    - Comfy dtype: BOOLEAN
    - Python dtype: bool
- quality
    - The " Quality " parameter affects the balance between the size of the file and the quality of the image in saving the animation. Higher values get better image quality, but the file size increases, while the lower values are the opposite.
    - Comfy dtype: INT
    - Python dtype: int
- method
    - The'method'parameter selects the compression algorithm used to create animated WEBP files. Different methods provide varying degrees of compression efficiency and speed, affecting the final file size and the time it takes to save the animation.
    - Comfy dtype: COMBO[default, fastest, slowest]
    - Python dtype: Literal['default', 'fastest', 'slowest']
## Optional
- filename_prefix
    - The " filename_prefix " parameter is very important because it determines the name agreement for saving the file, which is essential for organizing and identifying the output. It provides a base name and then combines it with a unique identifier to create a full filename.
    - Comfy dtype: STRING
    - Python dtype: str

# Output types
- ui
    - The 'ui' parameter in the output is a dictionary that contains details of the images saved, including file names and subfolders. It serves as a record of the output generated by the node and provides the user with a reference to the location and nature of the animated files saved.
    - Comfy dtype: DICT
    - Python dtype: Dict[str, Any]

# Usage tips
- Infra type: CPU

# Source code
```
class SaveAnimatedWEBP:

    def __init__(self):
        self.output_dir = folder_paths.get_output_directory()
        self.type = 'output'
        self.prefix_append = ''
    methods = {'default': 4, 'fastest': 0, 'slowest': 6}

    @classmethod
    def INPUT_TYPES(s):
        return {'required': {'images': ('IMAGE',), 'filename_prefix': ('STRING', {'default': 'ComfyUI'}), 'fps': ('FLOAT', {'default': 6.0, 'min': 0.01, 'max': 1000.0, 'step': 0.01}), 'lossless': ('BOOLEAN', {'default': True}), 'quality': ('INT', {'default': 80, 'min': 0, 'max': 100}), 'method': (list(s.methods.keys()),)}, 'hidden': {'prompt': 'PROMPT', 'extra_pnginfo': 'EXTRA_PNGINFO'}}
    RETURN_TYPES = ()
    FUNCTION = 'save_images'
    OUTPUT_NODE = True
    CATEGORY = 'image/animation'

    def save_images(self, images, fps, filename_prefix, lossless, quality, method, num_frames=0, prompt=None, extra_pnginfo=None):
        method = self.methods.get(method)
        filename_prefix += self.prefix_append
        (full_output_folder, filename, counter, subfolder, filename_prefix) = folder_paths.get_save_image_path(filename_prefix, self.output_dir, images[0].shape[1], images[0].shape[0])
        results = list()
        pil_images = []
        for image in images:
            i = 255.0 * image.cpu().numpy()
            img = Image.fromarray(np.clip(i, 0, 255).astype(np.uint8))
            pil_images.append(img)
        metadata = pil_images[0].getexif()
        if not args.disable_metadata:
            if prompt is not None:
                metadata[272] = 'prompt:{}'.format(json.dumps(prompt))
            if extra_pnginfo is not None:
                inital_exif = 271
                for x in extra_pnginfo:
                    metadata[inital_exif] = '{}:{}'.format(x, json.dumps(extra_pnginfo[x]))
                    inital_exif -= 1
        if num_frames == 0:
            num_frames = len(pil_images)
        c = len(pil_images)
        for i in range(0, c, num_frames):
            file = f'{filename}_{counter:05}_.webp'
            pil_images[i].save(os.path.join(full_output_folder, file), save_all=True, duration=int(1000.0 / fps), append_images=pil_images[i + 1:i + num_frames], exif=metadata, lossless=lossless, quality=quality, method=method)
            results.append({'filename': file, 'subfolder': subfolder, 'type': self.type})
            counter += 1
        animated = num_frames != 1
        return {'ui': {'images': results, 'animated': (animated,)}}
```